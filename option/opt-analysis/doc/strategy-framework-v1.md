# 策略分析框架 v1（基础版）

## 目标
基于现有 `spy` 数据流（实时 streaming、5 分钟 snapshot、EOD），建立可复现、可回测、可监控的基础策略分析框架，形成从数据到信号再到绩效评估的闭环。

## 数据来源与对齐
- **Streaming（tick/quote）**：用于构建高频事件序列、盘口变化与成交驱动特征。
- **5 分钟 snapshot**：用于生成稳定的区间指标（波动率、成交量、价格区间）。
- **EOD**：用于日级别趋势、风险暴露、宏观因子回归与策略归因。

对齐原则：
1. 以 5 分钟 snapshot 为主时间轴。
2. Streaming 数据聚合到 5 分钟桶内（均值、标准差、极值、成交量、VWAP）。
3. EOD 在日级别与 5 分钟桶关联（`date` 维度广播）。

## 数据处理流程
1. **输入层**：读取 streaming、snapshot、EOD（生产数据表/文件）。
2. **清洗层**：去重、时间戳校准、异常值过滤（高频尖刺、停牌异常）。
3. **特征层**：
   - 价格：log return、区间幅度、VWAP、收盘回撤。
   - 波动：5 分钟 realized vol、日内波动结构。
   - 流动性：bid-ask spread、成交量加权指标。
4. **信号层**：
   - 日内趋势突破（5 分钟高/低突破）。
   - 波动率均值回归信号。
5. **评估层**：
   - 单因子 IC/Rank IC。
   - 基础回测（无交易成本/简化成本）。

## 输出与落地
- **特征表**：`features_5m`、`features_eod`。
- **信号表**：`signals_5m`。
- **评估报告**：`reports/v1`。

## 版本边界（v1）
- 仅支持单标的（SPY）。
- 仅支持 5 分钟粒度的信号生成。
- 仅支持静态阈值与简单回测。
